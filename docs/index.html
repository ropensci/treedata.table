<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Wrapper for Data.table for Fast Manipulation of Phylogenetic Trees Matched to Data • treedata.table</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="A Wrapper for Data.table for Fast Manipulation of Phylogenetic Trees Matched to Data">
<meta property="og:description" content="This package combines trait data and a phylogenetic tree (or trees) into a 
    single object of class treedata.table. The resulting object can be easily 
    manipulated to simultaneously change the trait- and tree-level sampling.
    Currently implemented functions allow users to use a data.table syntax when
    performing operations on the trait dataset within the treedata.table object.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">treedata.table</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/1.1_treedata.table_intro_english.html">Getting Started With The treedata.table Package</a>
    </li>
    <li>
      <a href="articles/1.2_treedata.table_intro_spanish.html">Breve Introducción al Paquete treedata.table</a>
    </li>
    <li>
      <a href="articles/2_multiphylo_treedata.table.html">Working With multiPhylo Objects in treedata.table</a>
    </li>
    <li>
      <a href="articles/3_PartialMatching.html">Partially Matching of Trait Data and Tree(s) in treedata.table</a>
    </li>
    <li>
      <a href="articles/4_AdditionalFunctions_treedata.table.html">Additional Functions for Manipulating Data in treedata.table</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/uyedaj/treedata.table/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="treedata-table" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#treedata-table" class="anchor"></a>treedata.table</h1></div>
<div id="an-r-package-for-manipulating-phylogenetic-data-with-data-table" class="section level2">
<h2 class="hasAnchor">
<a href="#an-r-package-for-manipulating-phylogenetic-data-with-data-table" class="anchor"></a>An R package for manipulating phylogenetic data with <em>data.table</em>
</h2>
<p>A wrapper for data.table that enables fast manipulation of phylogenetic trees matched to data. <img src="reference/figures/logo.png" align="right" height="250"></p>
<!-- badges: start -->
<p><a href="https://travis-ci.org/uyedaj/treedata.table"><img src="https://travis-ci.org/uyedaj/treedata.table.svg?branch=master" alt="Travis build status"></a> <a href="https://codecov.io/gh/uyedaj/treedata.table"><img src="https://codecov.io/gh/uyedaj/treedata.table/branch/master/graph/badge.svg" alt="codecov"></a> <a href="https://github.com/uyedaj/treedata.table"><img src="https://img.shields.io/badge/devel%20version-0.1.0-blue.svg" alt="Devel version"></a> <a href="https://www.tidyverse.org/lifecycle/#uyedaj/treedata.table"><img src="https://img.shields.io/badge/lifecycle-uyedaj/treedata.table-blue.svg" alt="Lifecycle"></a> <a href="https://github.com/uyedaj/treedata.table"><img src="https://img.shields.io/github/languages/code-size/uyedaj/treedata.table.svg" alt="Code size"></a> <a href="https://github.com/uyedaj/treedata.table/commits/master"><img src="https://img.shields.io/github/last-commit/uyedaj/treedata.table.svg" alt="Latest commit"></a> <!-- badges: end --></p>
<p>The <a href="https://github.com/Rdatatable/data.table"><code>data.table</code> package</a> enables high-performance extended functionality for data tables in R. <code>treedata.table</code> is a wrapper for <code>data.table</code> for phylogenetic analyses that matches a phylogeny to the data.table, and preserves matching during <code>data.table</code> operations.</p>
</div>
<div id="why-use-treedata-table" class="section level2">
<h2 class="hasAnchor">
<a href="#why-use-treedata-table" class="anchor"></a>Why use <code>treedata.table</code>?</h2>
<p>Simultaneous processing of phylogenetic trees and data remains a computationally-intensive task. For example, processing a dataset of phylogenetic characters alongside a tree in <code>treedata.table</code> takes <strong>90%</strong> longer than processing the data alone in <code>data.table</code> (<em>Fig. 1A</em>). <code>treedata.table</code> provides new tools for increasing the speed and efficiency of phylogenetic data processing. Data manipulation in <code>treedata.table</code> is significantly faster than in other commonly used packages such as <code>base</code> (<strong>&gt;35%</strong>), <code>treeplyr</code> (<strong>&gt;60%</strong>), and <code>dplyr</code> (<strong>&gt;90%</strong>). Additionally, <code>treedata.table</code> is <strong>&gt;400%</strong> faster than <code>treeplyr</code> during the initial data/tree matching step (<em>Fig. 1B</em>).</p>
<div style="text-align:center">
<img src="reference/figures/bench_TDT_Aug14.png" align="middle" width="600">
</div>
<p><font size="2"> <strong>Fig. 1.</strong> Results for the <code>treedata.table</code> microbenchmark during (<strong>A</strong>) data manipulation (<code>treedata.table[</code>) and (<strong>B</strong>) tree/data matching steps. We compare the performance of <code>treedata.table</code> against <code>treedata.table</code>, <code>base</code>, <code>treeplyr</code>, and <code>dplyr</code> using the <code>microbenchmark</code> R package.</font></p>
</div>
<div id="installing-treedata-table" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-treedata-table" class="anchor"></a>Installing <code>treedata.table</code>
</h2>
<p>treedata.table can be installed from GitHub at the present. We presently recommend installing using <a href="https://cran.r-project.org/web/packages/remotes/index.html"><code>remotes</code></a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
 <span class="kw">remotes</span>::<span class="fu"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"uyedaj/treedata.table"</span>)
</pre></div>
</div>
<div id="what-can-i-do-with-treedata-table" class="section level2">
<h2 class="hasAnchor">
<a href="#what-can-i-do-with-treedata-table" class="anchor"></a>What Can I Do With <code>treedata.table</code>?</h2>
<p><code>treedata.table</code> is designed with the intention of being able to efficiently manipulate trait data and phylogenetic trees to enable comparative analyses. With the package is bundled some example data. Let’s load it in and look at some common analyses.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="kw">anolis</span>)
<span class="kw">td</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/as.treedata.table.html">as.treedata.table</a></span>(tree = <span class="kw">anolis</span><span class="op">$</span><span class="kw">phy</span>, data = <span class="kw">anolis</span><span class="op">$</span><span class="kw">dat</span>)
</pre></div>
<p>The function <code>as.treedata.table</code> converts a normal comma- or tab-delimited file to the <code>data.table</code> <a href="https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html">format</a>. This enables a range of efficient and intutive indexing and selection operations.</p>
<p>As an example, in our dataset is the column <code>SVL</code>, or snout-to-vent length in our anoles. We can index out this column on the fly, and run a Brownian motion analysis on this trait using the R package Geiger:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="fu"><a href="reference/tdt.html">tdt</a></span>(<span class="kw">td</span>, <span class="kw">geiger</span>::<span class="fu"><a href="https://rdrr.io/pkg/geiger/man/fitContinuous.html">fitContinuous</a></span>(<span class="kw">phy</span>, <span class="fu"><a href="reference/extractVector.html">extractVector</a></span>(<span class="kw">td</span>, <span class="st">'SVL'</span>), model=<span class="st">"BM"</span>, ncores=<span class="fl">1</span>))
</pre></div>
<p>We can also do efficient dropping of taxa from the analysis like so:</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="kw">dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/droptreedata.table.html">droptreedata.table</a></span>(tdObject=<span class="kw">td</span>, taxa=<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"chamaeleonides"</span> ,<span class="st">"eugenegrahami"</span> ))
</pre></div>
<div id="tldr" class="section level3">
<h3 class="hasAnchor">
<a href="#tldr" class="anchor"></a>tl;dr</h3>
<p><code>treedata.table</code> is a library for syncing data between a dataset and the tipcs of trees to enable efficient data and taxon management, as well as on-the-fly indexing and data selection in comparative analyses.</p>
</div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>Please see our <a href="CONTRIBUTING">contributing guide</a>.</p>
</div>
<div id="contact" class="section level2">
<h2 class="hasAnchor">
<a href="#contact" class="anchor"></a>Contact</h2>
<p>Please see the package <a href="DESCRIPTION">DESCRIPTION</a> for package authors.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/uyedaj/treedata.table/">https://​github.com/​uyedaj/​treedata.table/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/uyedaj/treedata.table/issues">https://​github.com/​uyedaj/​treedata.table/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Josef Uyeda <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-4624-9680" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Cristian Roman-Palacios <br><small class="roles"> Maintainer </small> <a href="https://orcid.org/0000-0003-4692-3225" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>April Wright <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-4692-3225" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Josef Uyeda, Cristian Roman-Palacios, April Wright.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
